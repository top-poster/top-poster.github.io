---
layout: post
title: "웹 앱을 배포하기 전에 고려해야 할 9가지 보안 관련 사항"
author: "Logger"
thumbnail: "undefined"
tags: 
---


![A smartphone rested on a yellow background. On the smartphone screen is a white lock icon resting on a blue background.](https://miro.medium.com/max/2000/0*_0TlzGwuP25BMsI5)

새 웹 응용 프로그램이 배포되면 일반적으로 보안 검사에 제출됩니다. 하지만 출시 일정이 촉박하기 때문에 보안 조건이 낮은 애플리케이션의 첫 번째 릴리즈를 구축하는 경우도 흔치 않습니다.

OWASP는 3~4년마다 상위 10개 웹 애플리케이션 보안 위험 목록을 게시합니다. 이 목록은 웹 서비스 구현 시 가장 일반적인 오류를 반영합니다.

![Changes between the latest published OWASP Top 10 (2017) and the previous one (2013)](https://miro.medium.com/max/1438/0*i8NDh7sPDfApqY0V.png)

제 경력 동안, 저는 보안성이 높은 여러 웹 응용 프로그램을 개발하는 일을 해왔습니다. 이 시간 동안, 저는 이러한 모든 종류의 오류를 범하고, 찾아내고, 고쳤습니다. 저는 윤리적인 해킹도 몇 번 해봤습니다. 그래서 저는 개발자들이 주로 어디서 실패하는지 알고 있습니다.

이 기사에서는 기본 기술과는 무관하게 웹 응용 프로그램을 배포하기 전에 고려해야 할 여러 가지 보안 측면을 강조합니다.

거부권: 이것은 OWASP Top 10과 나만의 경험을 바탕으로 한 보안 체크리스트입니다. 웹 응용 프로그램에서 이 목록에 있는 일부 지점이 필요하지 않거나 아래에 나열되지 않은 일부 보안 고려 사항이 필요할 수 있습니다.

# 디자인

우수한 API 설계는 보안 문제를 피하는 데 중요합니다. 설계 모범 사례를 따르고 API 설명서를 잘 활용하면 편안한 API에서 빨간색 플래그를 식별할 수 있습니다.

스웨거 편집기 및 OpenAPI 사양과 같은 이러한 목적에 매우 유용한 가이드와 특정 도구가 있습니다.

# 인증 및 인증

대부분의 경우 프로그램은 개인 영역을 가지므로 요청을 실행하기 전에 인증 및 권한 관리를 수행해야 합니다.

요청자가 활성 세션과 필요한 권한을 가진 유효한 사용자가 아닌 경우 이러한 제어로 인해 작업이 실행되지 않아야 합니다.

양호한 API 설명서에는 인증 세부 정보가 포함되어야 합니다.

# 접근 제어 - CORS

액세스 제어는 웹 응용 프로그램 도메인(또는 화이트리스트)으로 제한해야 합니다. 서버에서 CORS를 사용할 수 있는 경우, 비행 전 요청에서 요청의 출처가 허용되는지 여부를 확인하고, 그렇지 않은 경우 오류를 발생시킵니다.

![Making a request from JSFiddle to GitHub throws a CORS error](https://miro.medium.com/max/2728/1*EhfpjeSVZHPk2NqbZyFXRQ.png)

개발 단계에서 매우 관대한 CORS 구성을 사용하고 생산 환경에서 이 구성을 실수로 배포하는 것이 일반적입니다.

test-cors.org을 사용하여 서버에서 CORS를 사용할 수 있는지 테스트할 수 있습니다.

# SQL 주입

이 공격은 서버 데이터베이스에서 양식 주입 쿼리의 실행으로 구성됩니다. 이러한 방식으로 해커는 데이터베이스나 시스템에서 데이터를 추출, 수정 또는 삭제할 수 있습니다.

이러한 공격으로부터 서버를 보호하는 가장 좋은 방법은 데이터베이스 쿼리로 끝날 수 있는 모든 매개 변수를 검사하는 것입니다.

sqlmap은 SQL 주입 결함을 식별하는 데 유용한 도구입니다.

# HTTP 보안 헤더

HTTP 보안 헤더는 일반적인 공격으로부터 응용프로그램을 보호하는 데 유용합니다. 헬멧과 같은 라이브러리를 사용하면 Express 앱에서 이러한 헤더를 원활하게 추가할 수 있습니다.

가장 일반적인 공격을 줄이는 데 도움이 될 수 있는 다양한 용도의 HTTP 보안 헤더가 있습니다.

## XSS 공격

사이트 간 스크립팅(XSS) 공격은 공격자가 신뢰할 수 있는 웹 사이트에 주입한 임의 JavaScript 코드의 실행으로 구성된다. XSS는 최신 OWASP Top 10(2017)에서 7번째로 흔한 웹 애플리케이션 취약점이었다.

컨텐츠-보안-정책` 헤더와 엄격한 입력 검사를 사용하면 XSS 공격의 위험을 방지하고 완화할 수 있습니다. 기존 브라우저를 지원해야 하는 경우 `X-XSS-Protection` 헤더도 설정해야 합니다.

## 잭킹 클릭

클릭재킹은 사용자가 의도하지 않은 작업을 수행하도록 속이기 위해 상단 계층의 보이지 않는 프레임을 사용하여 클릭이나 키 입력과 같은 웹 사이트에서의 사용자 상호 작용을 가로채는 것으로 구성된다.

![A user clicks on the green PAY button, unaware that they’re really clicking on the red PAY button in the transparent top layer of a malicious web page. Image from OWASP.](https://miro.medium.com/max/1600/0*DxbyMTczr1xcL1BQ.png)

우리는 HTTP 헤더 `콘텐츠-보안-정책` 프레임 어스터 또는 `X-프레임-옵션`을 추가하여 우리 사이트가 `if프레임`에 포함되거나 임베디드되는 것을 방지함으로써 우리의 애플리케이션 보호를 높일 수 있다.

## CSRF 공격

사이트 간 요청 위조(CSRF)는 사용자의 브라우저가 현재 로그인되어 있는 웹 응용 프로그램에서 원치 않는 작업을 강제로 실행하는 공격입니다.

![Example of a CSRF attack](https://miro.medium.com/max/2556/1*fl325rdpiOD9EqKltHFbPw.png)

CSRF 공격의 주요 경감 대책은 CSRF 토큰과 `SameSite` 쿠키의 사용이다. Node.js 애플리케이션의 경우 `csurp` 모듈은 CSRF 토큰 생성 및 검증을 위한 미들웨어를 생성합니다.

# 오류 처리

머피의 법칙에 명시된 바와 같이, 만약 어떤 것이 잘못될 수 있다면, 그것은 잘못될 것이고, 따라서 여러분의 편안한 API는 오류를 우아하게 다룰 준비가 되어 있어야 합니다.

공격자에게 유용할 수 있는 오류(예: 기술, 버전 또는 매우 설명적인 메시지)에 정보가 노출되지 않도록 합니다. 표준 상태 코드와 일반 응답만 반환하여 HTTP 오류를 처리합니다.

양호한 API 설명서에는 무단 액세스 또는 내부 서버 오류와 같은 다양한 오류 응답에 대한 세부 정보가 포함되어야 합니다.

# 로깅, 모니터링 및 감사

응용 프로그램 서버의 로그를 만들고 보관하여 언제든지 어떤 일이 발생했는지 알 수 있도록 하는 것이 가장 중요합니다. 수집된 로그의 세부 정보 수와 수준은 애플리케이션별로 매우 다릅니다.

대용량 로그 파일이 생성되지 않도록 로그를 적절히 순환하고, 감사 요구 사항을 준수하도록 로그 보존 정책에 따라 이전 로그 파일을 보관하십시오.

SIEM을 사용하는 경우 NAT 애플리케이션에서 이상 징후가 감지될 때 경보를 생성하고 경보를 트리거하도록 이러한 로그를 설정할 수 있습니다.

최신 OWASP Top 10(2017년)은 최초로 불충분한 로깅을 포함함

# 최신 시스템 및 종속성

최소한 보안 수정 사항을 설치하기 위해서는 모든 소프트웨어 및 각 시스템을 정기적으로 업데이트해야 합니다.

Anchore 또는 Snyk와 같은 도구를 사용하여 알려진 취약성을 신속하게 해결할 수 있습니다.

# HTTPS

항상 SSL/TLS를 통한 HTTP를 사용하여 클라이언트와 서버 간에 보안 통신 채널을 설정하십시오.

HSTS(Strict-Transport-Security) 헤더와 관련하여 HTTPS를 강제로 사용할 수 있습니다.

# 마지막 생각

보안 수준은 보호 중인 데이터의 민감도에 맞게 조정되어야 합니다. 보안 위반은 비즈니스에 심각한 영향을 미칠 수 있으며, 때로는 문제가 발생할 때까지 보안 문제가 고려되지 않을 수도 있습니다. 너무 늦을 수도 있습니다.

완전한 보안은 불가능하지만, 이러한 사항을 고려한다면 보안 사고 위험과 관련 위험을 크게 줄일 수 있습니다.

읽어주셔서 감사합니다!