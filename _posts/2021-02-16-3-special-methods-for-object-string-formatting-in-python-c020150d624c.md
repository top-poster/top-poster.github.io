---
layout: post
title: "파이썬에서 객체 문자열 포맷을 위한 3가지 특수 방법"
author: "Logger"
thumbnail: "undefined"
tags: 
---


![The word “cool” written in light](https://miro.medium.com/max/10368/0*93dGpXMhUlS3Ttnk)

파이썬에서 밑줄은 속성 이름에 사용될 때 특별한 의미를 가집니다. 특별한 형태는 속성 이름의 앞뒤에 두 쌍의 더블 밑줄을 사용하는 것으로, 특별한 방법 또는 매직 메소드라고 불린다.

예를 들어, 우리들 대부분이 알게 되는 가장 첫 번째 특별한 방법은 아마도 파이썬 객체를 만드는 데 사용되는 초기화 방법 `__init__it`일 것이다. 다음 코드는 예를 보여 줍니다.

```undefined
학급 학생:
def__init__(자체, 이름):
self.name = 이름
```

이 클래스의 인스턴스 개체를 생성할 때 대화형 콘솔에 개체 변수를 입력하기만 하면 개체를 검사할 수 있습니다.

```undefined
>> 학생 0 = 학생 ("John Smith")
>> 학생 0
<__main_>입니다.0x11883aa60의 학생>
```

그러나 이 개체에 대한 정보는 그다지 흥미롭지 않으므로 클래스 및 메모리 주소만 표시됩니다. 좀 더 흥미롭게 하려면 사용자 정의 클래스에 대한 문자열 형식 지정 방법을 고려해야 합니다. 구체적으로, 우리는 이 글에서 세 가지 특별한 방법에 대해 토론할 것입니다.

# __repr__ 메서드

__repr___ 방법은 개체의 표현과 관련이 있습니다. 위와 같이 파이썬 객체는 대화식 콘솔에서 표현 문자열을 출력한다. 다음 코드는 이 기능을 나타냅니다.

한 가지 주목할 점은 `_repr___` 특수 방법에 대한 문자열을 반환해야 한다는 것이다. 문자열이 아닌 문자열을 반환하면 아래 그림과 같이 `유형 오류`가 발생합니다.

![Image for post](https://miro.medium.com/max/1106/1*yVZOh1NlNu7RSYIof1xgIg.png)

하지만, 중요한 문제는 어떤 문자열을 객체에 대해 반환해야 하는가? 사용자가 개체를 재구성할 수 있는 문자열(즉, 검사 대상 개체와 동일한 값을 갖는 개체를 생성)을 반환하는 것이 원칙입니다.

업데이트된 코드를 사용하여 아래와 같이 대화형 콘솔에서 개체를 검사할 수 있습니다. 보시다시피 표현 문자열은 유효한 파이썬 식입니다. 이를 사용하여 `Student` 개체를 만들 수 있습니다.

```undefined
>> 학생 0 = 학생 ("John Smith")
>> 학생 0
학생('존 스미스')
```

마찬가지로 내장 `repr()` 방법을 사용하여 표현 문자열을 검색할 수 있다. 이와 관련하여, 사람들은 문자열 표현을 내장된 `평가()` 함수로 보내서 다른 객체를 재구성할 것을 기대할 수 있다.

```undefined
>> 학생1 = 평가(repr(학생0))
>> 학생1
학생('존 스미스')
```

사이드 노트로, 우리는 객체의 속성을 보간하기 위해 f-string을 사용하고 기본적으로 f-str은 `_str___` 메서드를 호출하여 보간 변수의 값을 검색하기 때문에 `!r`을 사용하여 문자열의 원시 표현을 원하는 것으로 지정한다. 이 경우, `!r`을 생략하면 따옴표 내의 문자열 대신 문자열 자체를 사용하게 된다. 사소한 예를 들어 아래 코드를 생각해 보십시오. 후자 문자열은 `Student` 개체를 만드는 데 사용할 수 없습니다.

```undefined
>> 이름 = "존 스미스"
>> 인쇄(f"학생({name!r})"
학생('존 스미스')
>> 인쇄(f"학생({name})"
학생(존 스미스)
```

또 다른 주목할 점은 때때로 개체를 재구성할 수 있는 의미 있는 문자열을 제공하는 것이 실용적이지 않다는 것입니다. 이 경우 일반적으로 인스턴스의 클래스 및 일부 요약 정보를 동봉하기 위해 <<>를 사용합니다. 다음 코드는 기본 제공 클래스의 예를 보여줍니다.

# __str__ 메서드

개체 형식과 관련된 또 다른 흥미로운 특수 방법은 `__str___` 방법이다. 다음 코드는 사용자 정의 클래스에서 재정의할 수 있는 방법을 보여줍니다.

수정된 클래스로, 언제 호출되는지 봅시다.

```undefined
>> 인쇄(학생0)
__str__을(를) 호출합니다.
>> str(학생0)
'__str___이(가) 호출됩니다.'
>> f"{student0}"
'__str___이(가) 호출됩니다.'
```

위와 같이 최소 3개의 경우 `_str__` 특수 방법이 호출됩니다. 구체적으로는 print() 함수, str() 함수(구문 설탕일 뿐이므로 예상됨), f-string 보간 변수가 객체의 기본 __str__ 메서드를 호출한다.

`__str___` 방법이 사용되는 상황을 알고 있지만, 문제는 이 방법을 구현하기 위한 최선의 방법이 무엇인가 하는 것이다.

이러한 점 외에도 클래스에서 `__str__` 메서드를 정의하지 않으면 Python이 `__repr___`의 구현 여부를 찾는다는 점에 유의해야 합니다. 만약 그렇다면, `_str___`을 부르는 것은 무엇이라도 `_repr___`를 부르는 것으로 되돌아갈 것이다.

# __format__ 메서드

객체 문자열 포맷과 관련된 또 다른 중요한 특수 방법은 `__format___` 방법이다. 다음 코드는 사용자 정의 클래스에서 이 메서드의 서명을 보여 줍니다.

앞에서 설명한 것처럼 먼저 이 방법을 사용할 때의 일반적인 상황을 살펴보겠습니다.

```undefined
>> 학생 0 = 학생 ("John Smith")
>> f"{student0}"
'__format___이(가) 호출됩니다.'
>> 형식(학생0)
'__format___이(가) 호출됩니다.'
>> 인쇄(학생0)
<__main_>입니다.0x114a92c10의 학생 물체>
>> str(학생0)
'<_main_______'.0x114a92c10'의 학생 물체
```

f-string과 기본 제공 `format()` 메서드는 모두 `_format___` 메서드를 호출할 수 있습니다. F-string을 예로 들어 `__format___`의 작동 방식을 살펴보겠습니다.

`__repr________` 메서드와 달리 `_format____` 메서드에 `format_spec`이라는 추가 매개 변수가 있다는 것을 알 수 있습니다. 이 매개 변수는 개체를 문자열로 포맷하는 방법을 정의합니다. 아래 코드 조각에서 사용자 지정 규격을 살펴보겠습니다.

# 결론들

이 기사에서는 파이썬에서 포맷에 관한 세 가지 필수 특수 방법을 검토했다. 여기 간략한 요약이 있습니다.