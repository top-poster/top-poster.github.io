---
layout: post
title: "약속을 실천하고 있습니다.모든 결제 결합기"
author: "Logger"
thumbnail: "undefined"
tags: 
---


![Image for post](https://miro.medium.com/max/12000/0*IiS9aRq6p51MBkhA)

여러 번 요청을 하고 이러한 요청이 모두 충족되는 작업을 수행해야 하는 시나리오를 접해 본 적이 있습니까? 또는 해결된 요청 수와 거부된 요청 수를 확인하시겠습니까?

대부분의 경우 `약속`을 사용합니다.여러 가지 요청을 약속으로 처리할 때 도움이 되는 강력한 결합체입니다. 하지만 이 콤비네이터를 사용하는 것에는 몇 가지 단점도 있습니다. 이것이 무엇을 의미하는지 설명하기 위해, 그림 1을 살펴봅시다:

![Image for post](https://miro.medium.com/max/2800/0*1fNh5sQdtTmvJNIw)

URL의 어레이에 일부 API 끝점이 있고 모든 끝점에 요청을 보냈다고 가정해 보겠습니다. `약속`을 사용하는 경우.단 한 번의 요청도 거절당하면 단락이 생기고 나머지 요청은 무산된다. 코드 블록이 try-catch 문의 캐치케이스에 포함되기 때문에 나머지 요청도 추적할 수 없습니다.

이러한 시나리오 때문에 제이슨 윌리엄스(BBC), 로버트 파멜리(블룸버그), 챔피언 마티아스 번스(구글)는 `약속`으로 알려진 새로운 약속 결합기를 제안했다.전원 결산

# 정확히 약속이란 무엇인가.다 해결됐나요?

약속해.올세일드는 올해 자바스크립트에 추가될 새로운 결합업체다. 현재, 그 제안은 완성된 상태이다.

약속해.All Settled()는 주어진 약속이 모두 해결되거나 각 약속의 결과를 설명하는 일련의 객체로 거부된 후 해결되는 약속을 반환합니다.

## 사용 사례 #1

아래 제공된 예제를 수정해 보겠습니다.

![Image for post](https://miro.medium.com/max/2800/0*jSZ_yvWlS6Z4pBfJ)

우리는 그 요청들을 `약속`에 전달했습니다.모두 결제되고 "마침내()"로 불림 이 구현에는 단락이 전혀 없습니다. 거부로 인해 흐름이 멈추지 않습니다. 따라서, try-catch 명세서 및 추가 수표를 작성할 필요가 없습니다. 멋져 보이죠? 그럼 다른 사용 사례를 살펴볼까요?

## 사례 2 사용

어떤 요청이 이행되고 어떤 요청이 거부되었는지 추적해야 한다면 어떻게 해야 할까요? 전통적으로, 우리는 약속을 받아 그 상태를 이행 또는 거부로 되돌리는 도우미 기능의 도움으로 그것을 할 것이다.

![Image for post](https://miro.medium.com/max/2800/0*z2bErakcwpSmCksR)

위의 예제를 보면 `reflect`라는 도우미 기능이 생성되었음을 알 수 있습니다. 이 함수는 약속을 인수로 사용하고 반환문에 이를 호출합니다. 약속이 성공적으로 해결되면 온이필(onFulfilled)이라는 .then() 블록의 첫 번째 콜백 함수에 해당된다. 이를 사용하여 `onFulfilled` 콜백 함수에서 이행된 상태로 이행된 값을 반환한다. 약속이 거부되면 거부당하면 두 번째 콜백(on reject) 기능에 해당된다. 여기서는 이 콜백에서 거부된 오류와 상태를 반환합니다.

다음으로, 우리는 `반사`를 `약속.map()`에 콜백 함수로 전달하여 모든 약속을 종합하고 모든 결과의 배열을 반환할 것이다. 성공적인 약속을 확인하기 위해 우리는 지위의 도움을 받아 결과를 필터링하고 있습니다. 성공적인 약속 배열에는 모든 요청이 포함됩니다. 보시는 바와 같이, 이것은 많은 작업입니다.

`약속`을 보자.allSettled`는 이 프로세스를 단순화할 수 있습니다.

![Image for post](https://miro.medium.com/max/2800/0*SbirWAsWhTqZf8DN)

언뜻 보면 `약속`을 이용한 전통적 접근법과 `약속`의 차이를 느낄 수 있다.전원 결산 당신 자신의 구현체를 작성할 필요는 없습니다.

약속해.allSettled는 약속에 대한 지도를 작성하고 모든 결과가 포함된 배열을 이행 또는 거부로 반환한다. 기존 접근 방식처럼 요청을 필터링할 수 있습니다. 이 모든 것이 깨끗하고, 읽기 쉬우며, 훨씬 더 유지 관리가 가능합니다.

이 놀라운 조합을 사용하고 싶다면 다음과 같은 놀라운 리소스를 통해 사용할 수 있습니다.

# 맨 아래 선

여러 요청을 쉽고 안전하게 처리할 수 있는 이 놀라운 조합의 힘을 느낄 수 있습니다. 지금 바로 사용하고 싶다면, 이 글은 멋진 구현을 제공합니다. 그때까지, 이 놀라운 기능이 자바스크립트 세계에 추가되기를 기다려 봅시다!