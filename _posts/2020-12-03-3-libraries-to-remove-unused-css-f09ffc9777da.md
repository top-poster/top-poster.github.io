---
layout: post
title: "사용하지 않는 CSS를 제거할 라이브러리 3개"
author: "Logger"
thumbnail: "undefined"
tags: 
---


![Code](https://miro.medium.com/max/8000/0*V9ZVWsuy8LxSWx_p)

2020년 CSS 조사에는 유틸리티 라이브러리 전용 섹션이 있었다. 그 부분에서는 StyleLint, PurgeCSS, PurgeCSS의 사용에 대한 질문이 있었습니다. 이러한 라이브러리 중 두 개는 사용되지 않은 CSS를 제거하기 위한 것이다. PurgeCSS의 저자이자 Purge의 기여자로서CSS, 저는 그 도서관들이 어떤 문제를 해결할 수 있는지 설명하고 이 일을 하기 위해 가장 인기 있는 세 개의 도서관을 비교해보려고 합니다.

# 사용하지 않는 CSS를 제거하기 위해 라이브러리가 필요한 이유는 무엇입니까?

모든 라이브러리와 마찬가지로, 사용 사례는 사용 사례에 따라 달라지며 사용 방법이 타당하지 않은 경우도 있습니다. 이 문서에서 라이브러리의 가장 일반적인 사용 사례는 CSS 프레임워크로 사용되지 않은 CSS를 제거하는 것이다.

## CSS 프레임워크

부트스트랩에 대한 나의 과거 경험은 즐겁지 않았다. 왜냐하면 나는 주로 작은 웹사이트에 CSS 프레임워크를 사용하고 싶었기 때문이다. 그것들은 항상 부풀어 올랐습니다. 특히 정적 페이지 한 장에 대해서는요. 부트스트랩은 웹 사이트에서 CSS 프레임워크의 잘린 버전을 다운로드하는 데 사용할 기능을 선택할 수 있는 기능을 제공했습니다. 개발자의 경험은 형편없었다.

이에 비해 Tailwind CSS는 PurgeCSS를 사용하여 사용되지 않은 CSS를 자동으로 제거할 수 있는 옵션이 있다. Tailwind CS를 사용할 때는 웹 사이트를 축소하기 위해 다른 프레임워크를 고려해야 하는지 자문하는 경우가 거의 없습니다. 또한 규칙을 비활성화하기 위해 설정을 변경할 필요가 거의 없습니다.

## 레거시 웹 사이트

또 다른 활용 사례는 통제 불능의 레거시 사이트입니다. 시간이 지남에 따라 누적된 CSS메시지를 정리하기 위해 개발자 자원을 요청할 수 있지만, 먼저 이 도구를 사용하여 솔선수범할 수 있습니다. 이러한 라이브러리는 웹 사이트에 즉시 값을 추가하고 사용되지 않은 CSS를 식별하는 데 도움이 됩니다.

## 중요 페이지

몇몇 회사들은 웹사이트의 여러 부분을 관리하는 다른 팀들을 가지고 있다. 한 팀은 메인 애플리케이션 페이지를 담당할 수 있고, 다른 팀은 등록 및 결제 페이지를 담당할 수 있으며, 다른 팀은 설정 및 관리 페이지를 처리할 수 있습니다.

이러한 상황에서 팀 간에 코드가 항상 표시되는 것은 아닙니다. 그들은 공통의 CSS 프레임워크를 가지기로 선택할 수 있고 캐싱을 이용하기 위해 그것에서 어떤 CSS도 제거하지 않을 수 있다. 그러나 중요한 페이지에는 여전히 예외가 있어야 한다.

한 번 보고 등록 및 결제 페이지와 같이 높은 로딩 성능을 요구하는 페이지는 해당 라이브러리를 사용하여 프레임워크에서 사용되지 않은 CSS를 제거하고 최종 등록 단계에서 한 번 전체 버전을 미리 로드할 수 있다.

# 개요 및 비교

## 제거CSS

PurgeCSS의 작동 방식은 다음과 같습니다. 먼저, 저희 웹사이트의 내용을 살펴봅니다. 저희 스타일 빼고 다 될 거예요. 간단한 프로젝트의 경우 HTML 및 JavaScript 파일일 수 있습니다. 우리는 이 콘텐츠에서 우리의 CSS에 사용될 수 있는 선택기 목록을 받고 싶습니다. 아래 이미지를 보면 셀렉터가 어디에 있는지 알 수 있습니다.

![HTML and CSS files](https://miro.medium.com/max/5760/1*GkHcntanryu5GIsotdzBcA.png)

일단 목록을 확보하면, 1차 프로세스가 시작됩니다. 우리는 PostCSS를 사용하여 CSS 파일을 구문 분석한다. 그런 다음 추상 구문 트리(AST)를 살펴본다. 각 규칙을 살펴보고 규칙을 구성하는 선택자를 분석합니다. 목록에 없는 선택기가 있으면 사용되지 않고 규칙을 제거합니다.

위의 CSS 파일에서 PurgeCS는 규칙을 통해 `p`로 시작하여 반복됩니다. 목록에 p가 있어서 삭제하지 않기로 결정한다. `텍스트 투명`의 경우 목록에 표시되지 않고 규칙이 제거됩니다.

![Perceived selectors and CSS output](https://miro.medium.com/max/5760/1*kHpLC2rHeQNgrggcrGW7tg.png)

PurgeCSS는 추출기를 생성할 수 있는 기능을 제공합니다. 추출기(Extractor)는 파일의 콘텐츠를 가져와서 CSS 선택기 목록을 추출하는 함수이다. 사용하지 않는 CSS를 보다 정확하게 제거할 수 있다.

각 파일 유형에 사용할 추출기를 지정하여 가장 정확한 결과를 얻을 수 있습니다. 그러나 특정 추출기를 사용하는 것은 선택 사항이며 기본 추출기를 사용할 수 있습니다.

## CSS 정화

정화 CS는 Purge CS와 유사한 방식으로 작동합니다. 파일, 내용, CSS를 별도로 분석합니다. HTML 또는 JavaScript뿐만 아니라 모든 파일과 함께 사용할 수 있습니다.

하지만 퓨리핀의 가장 큰 결점은CSS는 모듈화의 부족이다. PurgeCSS와 비교하여 기본적으로 변경할 수 없는 하나의 추출기가 정의되어 있습니다. 퓨리프 추출기CSS는 모든 단어를 사용하며 일부 사용 사례를 기반으로 합니다.

`.hello-world`를 예로 들어 보겠습니다. PureCSS의 추출기는 자바스크립트에서 작동하도록 설계되었으며 클래스 이름을 형성하기 위해 문자열을 연결할 수 있다. 이 때문에 헬로월드 대신 헬로월드, 월드 등을 중고 클래스 이름으로 보게 된다.

모든 단어가 선택기로 간주되기 때문에 많은 선택기가 잘못 사용될 수 있습니다. 유틸리티 CSS 프레임워크에서 자주 사용되는 특수 문자와도 작동하지 않을 것이다.

## 운CSS

UnCSS는 다른 방식으로 문제에 접근한다. 파일을 분석하는 대신 웹 사이트를 실행하고 CSS 파일에서 선택기를 찾습니다. README에 표시된 것처럼 UnCSS는 jsdom으로 파일을 로드하는 것으로 시작하고 JavaScript가 실행된다. 이렇게 하면 HTML이 없는 React 단일 페이지 응용프로그램에서 작동할 수 있습니다.

그런 다음 포스트CSS는 모든 스타일시트를 구문 분석합니다. UnCSS는 스타일시트에 정의된 선택자 목록을 보고 `문서`를 실행합니다.웹 사이트에서 선택기를 쿼리합니다. 함수가 선택기를 찾지 못하면 CSS에서 제거됩니다.

HTML 에뮬레이션과 자바스크립트 실행 때문에 UnCSS는 웹 응용 프로그램에서 사용하지 않는 선택기를 효과적으로 제거한다.

그러나 에뮬레이션은 성능과 실용성 측면에서 비용이 들 수 있다. Pug 템플릿 파일에서 사용되지 않은 CSS를 제거하려면 Pug를 HTML로 변환하고 jsdom 내부의 페이지를 에뮬레이트해야 합니다. 이 단계 이후 UnCSS는 `문서`를 실행할 수 있다.각 선택기에서 선택기를 쿼리합니다.

이 프로세스의 또 다른 문제는 처음에 요소가 존재하지 않는 몇 가지 일반적인 사용 사례가 있다는 것입니다. 모달 모양을 표시하거나 다른 섹션을 표시하려면 웹 사이트의 단추를 클릭해야 할 수 있습니다.

UnCSS를 사용하면 웹 사이트의 요소를 클릭할 수 있습니다. 그러나 이는 유지 보수에 부담을 줍니다. 응용 프로그램을 살펴보고 숨겨진 모든 섹션을 검색하기 위해 작은 사이프레스/셀레늄 테스트를 만드는 것으로 볼 수 있습니다.

현재 UnCSS는 아마도 몇 가지 상황에서 사용하지 않는 CSS를 제거하는 가장 정확한 도구일 것이다. 만약 당신과 간단한 한페이지로 HTML과 자바 스크립트로 웹 사이트를 가지고 있SSI렌더링을 사용하지 않는다, 올바르게 사용하고 전투 근무 지원 규모 면에서 PurgeCSS 꾸준히 협력해야 한다.

# 자원.